name: Continuous Integration  
  
on:  
  pull_request:  
    branches:  
      - main  
  push:  
    branches:  
      - main  
  
permissions:  
  contents: read  
  
jobs:  
  test-typescript:  
    name: TypeScript Tests  
    runs-on: ubuntu-latest  
      
    defaults:  
      run:  
        working-directory: ./backend  
      
    steps:  
      - name: Checkout  
        uses: actions/checkout@v5  
  
      - name: Setup Node.js  
        uses: actions/setup-node@v6  
        with:  
          node-version: '20'  
          cache: npm
          cache-dependency-path: ./backend/package-lock.json  
  
      - name: Install Dependencies  
        run: npm ci
        
      - name: Lint
        run: npm run lint
        continue-on-error: true

      - name: Quality Metrics  
        run: |  
          echo "## ESLint Quality Report" >> $GITHUB_STEP_SUMMARY  
          echo "" >> $GITHUB_STEP_SUMMARY  
          npm run lint >> $GITHUB_STEP_SUMMARY  
        continue-on-error: true  
  
      - name: Type Check  
        run: npm run build  
  
      - name: Test  
        run: npm run test:unit


